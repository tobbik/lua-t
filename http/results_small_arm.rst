Small payloads (.15kBytes)
==========================

Hardware is the NUC with the A5000 APU runs ``wrk`` and RaspberryPi 4 (4GB)
runs the servers.

To start the curl command sets a user into the user table like this.

.. code:: bash

  /usr/bin/curl -i "http://pi64-master:10000/newUser?username=mickey&password=goofey"


Legend
------

All values are pretty self explanatory and standard for HTTP load testing.
The only unusual value is ``perc averg``.  It stands for how many percent of
the request returned in lest than the average latency for the whole run.


lua-t (keep-alive)
------------------

Memory consumption:

.. code::

  [alarm@pi64-master http]$ ps aux | grep s_t
  USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
  alarm       2384 43.0  0.1   7528  4740 pts/2    S+   22:25   2:54 ../out/bin/lua s_t.lua 10000

Benchmark results:

===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
conns requests kBytes     requests  kBytes     latncy latency latency latency latncy latncy latency latency latency latency kBytes time  error  error  error  error  error  perc 
      total    total      second    second     min    max     average stddev  30%    50%    75%     90%     99%     99.99%  req    total conns  reads  writes timeou status averg
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
50(c) 36496    5631.22    7293.23   1125.32    5.07   20.75   6.55    1.43    6.18   6.22   6.29    6.40    12.59   20.52   0.15   5.00  0      0      0      0      0      94   
1     39693    6124.51    1984.60   306.22     0.38   3.27    0.47    0.07    0.44   0.46   0.47    0.52    0.72    1.77    0.15   20.00 0      0      0      0      0      77   
5     148645   22935.46   7395.58   1141.11    0.29   7.50    0.51    0.06    0.50   0.51   0.54    0.56    0.60    2.25    0.15   20.10 0      0      0      0      0      61   
10    144392   22279.23   7183.73   1108.43    0.31   216.33  1.20    4.10    0.76   0.85   1.49    1.61    1.99    196.84  0.15   20.10 0      0      0      0      0      63   
50    148615   22930.83   7394.85   1141.00    0.78   23.03   6.44    1.36    6.13   6.19   6.22    6.29    12.44   21.87   0.15   20.10 0      0      0      0      0      94   
100   144931   22362.40   7240.29   1117.15    2.63   33.96   13.78   2.01    13.41  13.48  13.53   13.64   26.95   33.02   0.15   20.02 0      0      0      0      0      94   
200   143107   22080.96   7150.07   1103.23    4.29   57.75   27.92   2.87    27.48  27.52  27.66   28.13   54.91   57.44   0.15   20.01 0      0      0      0      0      85   
500   126136   19462.39   6282.25   969.33     17.98  215.09  79.23   9.33    72.81  73.27  89.12   89.43   89.78   178.63  0.15   20.08 0      0      0      0      0      60   
800   116585   17988.70   5812.69   896.88     18.34  291.63  136.16  14.79   119.83 145.36 146.00  146.44  146.91  151.89  0.15   20.06 0      0      0      0      0      34   
1000  114727   17702.02   5709.47   880.95     28.75  542.84  173.40  23.12   182.20 182.80 183.40  183.95  184.97  540.55  0.15   20.09 0      0      0      0      0      27   
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====


nodejs
------

Memory consumption:

.. code::

  [alarm@pi64-master http]$ ps aux | grep s_node
  USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
  alarm       2403 48.7  2.1 622156 82920 pts/2    Rl+  22:32   2:46 node s_node.js 10000

Benchmark results:

===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
conns requests kBytes     requests  kBytes     latncy latency latency latency latncy latncy latency latency latency latency kBytes time  error  error  error  error  error  perc 
      total    total      second    second     min    max     average stddev  30%    50%    75%     90%     99%     99.99%  req    total conns  reads  writes timeou status averg
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
50(c) 28255    4376.41    5540.45   858.16     1.05   119.48  9.91    9.70    5.85   6.25   10.48   18.79   51.46   117.84  0.15   5.10  0      0      0      0      0      72   
1     45720    7099.10    2274.66   353.19     0.32   9.47    0.42    0.21    0.38   0.40   0.41    0.44    0.71    8.15    0.16   20.10 0      0      0      0      0      83   
5     164278   25643.07   8173.39   1275.83    0.26   5.67    0.46    0.11    0.44   0.45   0.47    0.49    1.01    4.39    0.16   20.10 0      0      0      0      0      67   
10    160976   25152.50   8008.78   1251.37    0.30   11.15   0.97    0.40    0.68   0.82   1.27    1.40    2.01    6.76    0.16   20.10 0      0      0      0      0      57   
50    147293   23014.53   7360.06   1150.01    4.82   22.08   6.50    1.25    5.75   5.93   7.13    7.22    12.40   20.15   0.16   20.01 0      0      0      0      0      57   
100   140789   21998.28   7034.33   1099.11    11.45  43.43   14.19   1.83    12.66  14.81  15.40   15.68   16.72   43.39   0.16   20.01 0      0      0      0      0      49   
200   144980   22653.12   7241.83   1131.54    23.72  137.20  27.74   5.96    24.85  26.07  30.98   31.41   33.18   136.26  0.16   20.02 0      0      0      0      0      64   
500   136000   21250.00   6776.76   1058.87    62.87  252.31  73.70   13.33   65.57  67.41  80.98   82.75   107.53  251.30  0.16   20.07 0      0      0      0      0      58   
800   126106   19797.12   6274.45   985.01     2.67   344.19  124.42  22.46   130.12 130.37 132.31  133.06  145.71  313.19  0.16   20.10 0      0      0      0      0      18   
1000  139823   21983.89   6961.08   1094.47    46.98  378.48  142.65  15.74   131.95 134.37 163.41  165.96  171.20  252.19  0.16   20.09 0      0      0      0      0      67   
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====


go
--

Memory consumption:

.. code::

  [alarm@pi64-master http]$ ps aux | grep s_go
  USER         PID %CPU %MEM     VSZ   RSS TTY     STAT START   TIME COMMAND
  alarm       2500  167  0.9 1448340 35624 pts/2   Sl+  22:39   9:50 ./s_go 10000

Benchmark results:

===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
conns requests kBytes     requests  kBytes     latncy latency latency latency latncy latncy latency latency latency latency kBytes time  error  error  error  error  error  perc 
      total    total      second    second     min    max     average stddev  30%    50%    75%     90%     99%     99.99%  req    total conns  reads  writes timeou status averg
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
50(c) 183752   26916.80   36032.82  5278.25    0.19   212.87  1.38    3.56    0.83   1.10   1.64    2.26    4.13    186.51  0.15   5.10  0      0      0      0      0      62   
1     45236    6626.37    2250.55   329.67     0.33   2.76    0.41    0.08    0.39   0.40   0.42    0.45    0.70    1.95    0.15   20.10 0      0      0      0      0      63   
5     193662   28368.46   9635.16   1411.40    0.23   6.60    0.39    0.08    0.35   0.38   0.41    0.45    0.55    1.94    0.15   20.10 0      0      0      0      0      57   
10    491960   72064.45   24476.19  3585.38    0.17   5.33    0.31    0.11    0.26   0.29   0.34    0.39    0.71    3.58    0.15   20.10 0      0      0      0      0      62   
50    727474   106563.57  36346.75  5324.23    0.19   215.52  1.33    1.99    0.83   1.10   1.63    2.28    4.33    111.02  0.15   20.01 0      0      0      0      0      60   
100   699647   102487.35  34914.25  5114.39    0.19   229.63  2.95    3.91    1.75   2.48   3.77    5.02    9.17    189.37  0.15   20.04 0      0      0      0      0      57   
200   653017   95656.79   32519.13  4763.54    0.19   238.58  6.33    5.95    3.69   5.55   8.16    11.16   20.64   195.07  0.15   20.08 0      0      0      0      0      56   
500   616190   90262.21   30665.90  4492.07    0.21   503.51  18.11   20.98   10.61  13.25  18.77   32.44   106.50  352.26  0.15   20.09 0      0      0      0      0      73   
800   616872   90362.11   30691.41  4495.81    0.21   285.80  26.44   19.49   18.19  20.99  27.70   46.11   106.39  252.20  0.15   20.10 0      0      0      0      0      72   
1000  609551   89289.70   30330.84  4442.99    0.20   280.23  33.52   24.21   23.17  26.17  34.35   59.47   132.33  255.43  0.15   20.10 0      0      0      0      0      73   
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====


Results for single connections
==============================


lua-t
-----

Memory consumption:

.. code::

  [alarm@pi64-master http]$ ps aux | grep s_t
  USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
  alarm       2531 48.7  0.1   7924  5240 pts/2    R+   22:46   2:35 ../out/bin/lua s_t.lua 10000

Benchmark results:

===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
conns requests kBytes     requests  kBytes     latncy latency latency latency latncy latncy latency latency latency latency kBytes time  error  error  error  error  error  perc 
      total    total      second    second     min    max     average stddev  30%    50%    75%     90%     99%     99.99%  req    total conns  reads  writes timeou status averg
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
50(c) 15837    2366.27    3105.82   464.05     0.51   20.94   14.58   4.04    11.28  12.43  18.50   19.05   19.86   20.88   0.15   5.10  0      0      0      0      0      52   
1     15005    2241.96    750.19    112.09     0.59   4.33    0.79    0.10    0.73   0.76   0.81    0.91    1.10    3.00    0.15   20.00 0      0      0      0      0      60   
5     67122    10028.97   3355.58   501.37     0.38   4.65    0.74    0.17    0.64   0.71   0.81    0.93    1.35    2.60    0.15   20.00 0      0      0      0      0      59   
10    70741    10569.70   3535.49   528.25     0.51   7.28    1.78    0.52    1.48   1.60   1.87    2.69    3.13    4.50    0.15   20.01 0      0      0      0      0      71   
50    80399    12012.74   4016.47   600.12     2.37   21.31   11.29   0.78    11.02  11.22  11.67   12.21   12.82   20.63   0.15   20.02 0      0      0      0      0      55   
100   79467    11873.49   3966.93   592.72     1.50   39.21   24.31   1.57    23.86  24.35  25.09   25.61   28.25   36.91   0.15   20.03 0      0      0      0      0      48   
200   78666    11753.81   3919.74   585.66     9.23   90.14   49.44   3.91    49.35  50.14  50.52   50.98   62.26   76.78   0.15   20.07 0      0      0      0      0      31   
500   73615    10999.12   3662.11   547.17     5.68   215.62  133.88  20.78   128.67 130.27 131.88  137.76  210.05  215.09  0.15   20.10 0      0      0      0      0      83   
800   51789    7738.00    2582.70   385.89     8.03   261.39  202.96  23.80   203.63 207.90 211.12  213.90  222.54  260.39  0.15   20.05 0      0      0      783    0      24   
1000  65609    9802.91    3234.03   483.21     1.85   831.38  250.15  76.66   261.70 263.19 264.03  285.99  508.12  816.44  0.15   20.29 0      0      0      0      0      21   
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====


node-js
-------

Memory consumption:

.. code::

  [alarm@pi64-master http]$ ps aux | grep s_node
  USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
  alarm       2558 23.1  2.3 629792 91224 pts/2    Sl+  22:51   1:23 node s_node.js 10000

Benchmark results:

===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
conns requests kBytes     requests  kBytes     latncy latency latency latency latncy latncy latency latency latency latency kBytes time  error  error  error  error  error  perc 
      total    total      second    second     min    max     average stddev  30%    50%    75%     90%     99%     99.99%  req    total conns  reads  writes timeou status averg
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
50(c) 9133     1363.52    1781.19   265.92     0.55   133.31  24.40   13.81   16.55  19.48  28.79   37.88   77.09   133.31  0.15   5.13  0      0      0      0      0      65   
1     7845     1178.97    391.96    58.91      0.60   9.72    0.83    0.32    0.76   0.79   0.83    0.97    1.28    9.72    0.15   20.01 0      0      0      0      0      76   
5     9082     1365.85    451.74    67.94      0.58   11.10   1.38    0.46    1.12   1.29   1.61    1.92    2.57    11.10   0.15   20.10 0      0      0      0      0      57   
10    20267    3047.97    1008.32   151.64     0.44   20.08   3.65    2.04    3.15   3.35   3.65    7.15    8.59    12.08   0.15   20.10 0      0      0      0      0      74   
50    11752    1767.39    582.64    87.62      0.44   104.36  38.64   25.98   17.29  36.75  60.02   75.95   89.21   101.12  0.15   20.17 0      0      0      0      0      53   
100   23300    3504.10    1154.67   173.65     0.61   192.25  50.40   40.70   28.38  30.22  63.86   121.70  169.60  188.01  0.15   20.18 0      0      0      0      0      71   
200   14434    2170.74    710.10    106.79     0.78   364.39  139.41  83.58   83.55  134.08 204.88  257.31  313.81  357.38  0.15   20.33 0      0      0      0      0      52   
500   26858    4061.35    1307.64   197.74     0.81   644.85  227.81  122.85  156.16 185.67 283.88  426.69  553.66  635.50  0.15   20.54 0      0      0      0      0      58   
800   20812    3150.25    1024.42   155.06     1.09   974.86  386.21  215.91  246.42 388.65 564.08  674.68  814.75  966.40  0.15   20.32 0      0      0      0      0      49   
1000  29713    4497.57    1434.98   217.21     1.42   1190.91 406.01  222.16  306.04 330.26 538.89  756.74  969.48  1187.59 0.15   20.71 0      0      0      0      0      63   
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====


go
--

Memory consumption:

.. code::

  [alarm@pi64-master http]$ ps aux | grep s_go
  USER         PID %CPU %MEM     VSZ   RSS TTY     STAT START   TIME COMMAND
  alarm       2644 60.4  0.7 1448340 28384 pts/2   Sl+  22:58   3:08 ./s_go 10000

Benchmark results:

===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
conns requests kBytes     requests  kBytes     latncy latency latency latency latncy latncy latency latency latency latency kBytes time  error  error  error  error  error  perc 
      total    total      second    second     min    max     average stddev  30%    50%    75%     90%     99%     99.99%  req    total conns  reads  writes timeou status averg
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
50(c) 39661    6545.61    7776.43   1283.41    0.41   41.99   4.47    3.33    2.02   2.38   7.61    8.06    15.72   35.13   0.17   5.10  0      0      0      0      0      60   
1     15226    2512.88    757.53    125.02     0.53   2.51    0.73    0.08    0.69   0.73   0.77    0.81    0.94    2.40    0.17   20.10 0      0      0      0      0      52   
5     16458    2716.21    819.01    135.17     0.34   8.93    0.79    0.22    0.66   0.81   0.91    0.96    1.22    8.47    0.17   20.10 0      0      0      0      0      46   
10    48064    7932.44    2395.40   395.33     0.32   25.90   1.33    1.90    0.65   0.81   1.00    1.44    8.42    23.40   0.17   20.07 0      0      0      0      0      89   
50    21381    3528.70    1063.44   175.51     0.33   171.79  21.26   23.65   3.37   9.37   34.68   60.70   84.64   163.26  0.17   20.11 0      0      0      0      0      64   
100   54708    9028.96    2716.10   448.26     0.51   352.70  26.22   39.00   4.11   5.44   31.79   84.58   166.39  307.39  0.17   20.14 0      0      0      0      0      73   
200   38174    6300.20    1891.54   312.18     0.55   283.49  48.46   46.43   13.24  30.16  74.74   119.93  187.59  270.21  0.17   20.18 0      0      0      0      0      61   
500   108442   17897.17   5369.87   886.24     0.60   457.98  40.61   38.44   19.70  24.20  50.15   90.65   183.23  348.42  0.17   20.19 0      0      0      0      0      69   
800   118512   19559.11   5894.37   972.80     0.96   583.66  62.56   56.90   30.11  48.21  80.05   119.34  296.26  447.81  0.17   20.11 0      0      0      2      0      63   
1000  145140   23953.77   7223.23   1192.12    0.99   589.33  55.56   53.80   25.12  36.12  70.93   115.87  273.02  534.43  0.17   20.09 0      0      0      0      0      66   
===== ======== ========== ========= ========== ====== ======= ======= ======= ====== ====== ======= ======= ======= ======= ====== ===== ====== ====== ====== ====== ====== =====
